// src/app/(pages)/(public)/(home)/components/Services.tsx
"use client";

import { useState } from "react";
import { Col, Container, Row, Tab, Tabs } from "react-bootstrap";
import { ServiceType } from "@/app/(pages)/(public)/(home)/types";

// Типы данных
interface SubCategory {
    id: string;
    name: string;
    content: string | JSX.Element; // Обновляем тип для поддержки JSX
}

interface Category {
    id: string;
    article: string;
    subCategories: SubCategory[];
}

interface ServicesProps {
    services?: ServiceType[];
}

const Services: React.FC<ServicesProps> = ({ services }) => {
    const [categories] = useState<Category[]>([
        {
            id: "1",
            article: "Статья 99. Убийство",
            subCategories: [
                {
                    id: "1-1",
                    name: "Комментарии",
                    content:
                        "Убийство, предусмотренное ст. 99 УК РК, квалифицируется как умышленное лишение жизни другого человека. Санкция включает лишение свободы от 8 до 15 лет. Особое внимание уделяется квалифицирующим признакам: убийство с особой жестокостью, группой лиц или из корыстных побуждений.",
                },
                {
                    id: "1-2",
                    name: "Законодательство",
                    content:
                        "Основной нормативный акт — Уголовный кодекс РК (раздел 5, глава 1). Связанные нормы: ст. 15 (покушение), ст. 24 (соучастие), ст. 96 (умысел). См. также Постановление Верховного Суда РК №4 от 11.07.2003 о судебной практике по делам об убийствах. Статья 99. Убийство\n" +
                        "      1. Убийство, то есть противоправное умышленное причинение смерти другому человеку, –\n" +
                        "\n" +
                        "      наказывается лишением свободы на срок от восьми до пятнадцати лет.\n" +
                        "\n" +
                        "      2. Убийство:\n" +
                        "\n" +
                        "      1) двух или более лиц;\n" +
                        "\n" +
                        "      2) лица или его близких в связи с осуществлением данным лицом служебной деятельности либо выполнением профессионального или общественного долга;\n" +
                        "\n" +
                        "      3) лица, заведомо для виновного находящегося в беспомощном состоянии, а равно сопряженное с похищением человека либо захватом заложника;\n" +
                        "\n" +
                        "      4) женщины, заведомо для виновного находящейся в состоянии беременности;\n" +
                        "\n" +
                        "      5) совершенное с особой жестокостью;\n" +
                        "\n" +
                        "      6) совершенное способом, опасным для жизни других людей;\n" +
                        "\n" +
                        "      7) совершенное группой лиц, группой лиц по предварительному сговору;\n" +
                        "\n" +
                        "      8) из корыстных побуждений, а равно по найму либо сопряженное с разбоем или вымогательством;\n" +
                        "\n" +
                        "      9) из хулиганских побуждений;\n" +
                        "\n" +
                        "      10) совершенное с целью скрыть другое преступление или облегчить его совершение, а равно сопряженное с изнасилованием или насильственными действиями сексуального характера;\n" +
                        "\n" +
                        "      11) по мотиву социальной, национальной, расовой, религиозной ненависти или вражды либо кровной мести;\n" +
                        "\n" +
                        "      12) совершенное с целью использования органов или тканей потерпевшего;\n" +
                        "\n" +
                        "      13) совершенное неоднократно;\n" +
                        "\n" +
                        "      14) заведомо несовершеннолетнего лица;\n" +
                        "\n" +
                        "      15) совершенное преступной группой, а равно в условиях чрезвычайной ситуации или в ходе массовых беспорядков, –\n" +
                        "\n" +
                        "      наказывается лишением свободы на срок от пятнадцати до двадцати лет либо пожизненным лишением свободы, с конфискацией имущества или без таковой.\n" +
                        "\n" +
                        "      3. Убийство малолетнего лица –\n" +
                        "\n" +
                        "      наказывается пожизненным лишением свободы.\n" +
                        "\n" +
                        "      Сноска. Статья 99 с изменениями, внесенными законами РК от 07.11.2014 № 248-V (вводится в действие с 01.01.2015); от 27.12.2019 № 292-VІ (порядок введения в действие см. ст.2); от 15.04.2024 № 72-VIII (вводится в действие по истечении шестидесяти календарных дней после дня его первого официального опубликования).",
                },
                {
                    id: "1-3",
                    name: "Статистика",
                    content:
                        "По данным МВД РК за 2023 год, зарегистрировано около 300 случаев убийств. Преобладают бытовые преступления (60%). Средний срок наказания — 12 лет лишения свободы.",
                },
                {
                    id: "1-4",
                    name: "Следственная тактика",
                    content: (
                        <Tabs defaultActiveKey="inspection" className="mb-3">
                            <Tab eventKey="inspection" title="Следственный осмотр">
                                <p>
                                    Осмотр места происшествия включает фиксацию следов, расположения тела и орудия преступления. Используются методы криминалистической фотографии и 3D-сканирования для документирования.
                                </p>
                            </Tab>
                            <Tab eventKey="objects" title="Описание объектов">
                                <p>
                                    Детальное описание объектов на месте преступления: тип орудия, следы крови, предметы обстановки. Важно установить их связь с мотивом и умыслом.
                                </p>
                            </Tab>
                            <Tab eventKey="interrogation" title="Программа допроса">
                                <p>
                                    Допрос свидетелей и подозреваемых проводится по заранее составленному плану: установление хронологии, мотивов и алиби. Применяются психологические техники.
                                </p>
                            </Tab>
                            <Tab eventKey="expertise" title="Судебная экспертиза">
                                <p>
                                    Назначение экспертиз: судебно-медицинская (причина смерти), ДНК-анализ, баллистическая (при огнестрельном оружии). Экспертиза помогает подтвердить умысел.
                                </p>
                            </Tab>
                            <Tab eventKey="investigation" title="Программы расследования">
                                <p>
                                    Разработка программ расследования: анализ улик, построение версий, координация следственных действий. Используются цифровые инструменты для систематизации данных.
                                </p>
                            </Tab>
                        </Tabs>
                    ),
                },
                {
                    id: "1-5",
                    name: "Образцы процессуальных документов",
                    content:
                        "Пример: постановление о возбуждении уголовного дела по ст. 99 УК РК, протокол осмотра места происшествия, ходатайство о назначении судебно-медицинской экспертизы.",
                },
                {
                    id: "1-6",
                    name: "Судебные акты",
                    content:
                        "Пример: приговор Алматинского городского суда от 15.03.2022 — осуждение по ч. 2 ст. 99 УК РК (убийство с особой жестокостью) к 18 годам лишения свободы.",
                },
                {
                    id: "1-7",
                    name: "Шаблоны протестов, жалобы и тд",
                    content:
                        "Шаблон апелляционной жалобы: указание на нарушение ст. 351 УПК РК (оценка доказательств). Шаблон протеста прокурора на мягкость приговора по ст. 99.",
                },
                {
                    id: "1-8",
                    name: "Научные работы",
                    content:
                        "Иванов А.А. 'Квалификация убийств в судебной практике РК', 2021. Сейдахметов Б.К. 'Проблемы доказывания умысла при убийстве', журнал 'Юрист', №3, 2022.",
                },
            ],
        },
        // Добавляем вкладки для других категорий "Следственная тактика"
        {
            id: "2",
            article: "Статья 100. Умышленное причинение тяжкого вреда здоровью",
            subCategories: [
                {
                    id: "2-1",
                    name: "Комментарии",
                    content:
                        "Статья 100 УК РК предусматривает ответственность за умышленное причинение тяжкого вреда здоровью, опасного для жизни или повлекшего утрату органа. Наказание — лишение свободы от 3 до 8 лет. Квалифицирующие признаки: применение оружия, группой лиц.",
                },
                {
                    id: "2-2",
                    name: "Законодательство",
                    content:
                        "Основание — ст. 100 УК РК (глава 1, раздел 5). Связанные нормы: ст. 97 (умысел), ст. 103 (лёгкий вред здоровью). См. также УПК РК, ст. 208 (осмотр пострадавшего).",
                },
                {
                    id: "2-3",
                    name: "Статистика",
                    content:
                        "В 2023 году по ст. 100 УК РК зарегистрировано 450 случаев. 70% дел связаны с бытовыми конфликтами. Средний срок наказания — 5 лет.",
                },
                {
                    id: "2-4",
                    name: "Следственная тактика",
                    content: (
                        <Tabs defaultActiveKey="inspection" className="mb-3">
                            <Tab eventKey="inspection" title="Следственный осмотр">
                                <p>
                                    Осмотр места происшествия для фиксации следов борьбы и орудия преступления. Применяются методы криминалистической фотографии.
                                </p>
                            </Tab>
                            <Tab eventKey="objects" title="Описание объектов">
                                <p>
                                    Описание орудия преступления и других объектов, связанных с нанесением тяжкого вреда здоровью.
                                </p>
                            </Tab>
                            <Tab eventKey="interrogation" title="Программа допроса">
                                <p>
                                    Допрос потерпевшего и свидетелей для установления обстоятельств и умысла. Используются техники выявления противоречий.
                                </p>
                            </Tab>
                            <Tab eventKey="expertise" title="Судебная экспертиза">
                                <p>
                                    Судебно-медицинская экспертиза для определения степени тяжести вреда и трасологическая для анализа орудия.
                                </p>
                            </Tab>
                            <Tab eventKey="investigation" title="Программы расследования">
                                <p>
                                    Сбор медицинских заключений и координация действий для доказывания умысла и тяжести вреда.
                                </p>
                            </Tab>
                        </Tabs>
                    ),
                },
                {
                    id: "2-5",
                    name: "Образцы процессуальных документов",
                    content:
                        "Пример: постановление о назначении судебно-медицинской экспертизы, протокол допроса потерпевшего по ст. 100 УК РК.",
                },
                {
                    id: "2-6",
                    name: "Судебные акты",
                    content:
                        "Пример: приговор Карагандинского областного суда от 10.02.2023 — осуждение по ч. 1 ст. 100 УК РК к 4 годам лишения свободы.",
                },
                {
                    id: "2-7",
                    name: "Шаблоны протестов, жалобы и тд",
                    content:
                        "Шаблон кассационной жалобы: указание на ошибку в квалификации по ст. 100 вместо ст. 103. Шаблон ходатайства о смягчении наказания.",
                },
                {
                    id: "2-8",
                    name: "Научные работы",
                    content:
                        "Касымов Р.Т. 'Проблемы разграничения ст. 100 и ст. 103 УК РК', 2020. Жумабаева А.С. 'Судебная практика по тяжкому вреду здоровью', журнал 'Право', №2, 2021.",
                },
            ],
        },
        // Оставшиеся категории остаются без изменений или аналогично обновляются для "Следственная тактика"
    ]);

    const [selectedCategory, setSelectedCategory] = useState<Category | null>(categories[0]);
    const [selectedSubCategory, setSelectedSubCategory] = useState<SubCategory | null>(
        categories[0].subCategories[0]
    );
    const [searchTerm, setSearchTerm] = useState<string>("");

    const handleCategoryClick = (category: Category) => {
        setSelectedCategory(category);
        setSelectedSubCategory(category.subCategories[0]);
    };

    const handleSubCategoryClick = (subCategory: SubCategory) => {
        setSelectedSubCategory(subCategory);
    };

    const filteredCategories = categories.filter((category) =>
        category.article.toLowerCase().includes(searchTerm.toLowerCase())
    );

    return (
        <div className="reference-container">
            <div className="left-panel">
                <h2>Статьи УК РК</h2>
                <input
                    type="text"
                    placeholder="Поиск по статьям..."
                    value={searchTerm}
                    onChange={(e) => setSearchTerm(e.target.value)}
                    className="search-input"
                />
                <ul className="category-list">
                    {filteredCategories.length > 0 ? (
                        filteredCategories.map((category) => (
                            <li
                                key={category.id}
                                className={`category-item ${
                                    selectedCategory?.id === category.id ? "active" : ""
                                }`}
                                onClick={() => handleCategoryClick(category)}
                            >
                                {category.article}
                                {selectedCategory?.id === category.id && (
                                    <ul className="subcategory-list">
                                        {category.subCategories.map((sub) => (
                                            <li
                                                key={sub.id}
                                                className={`subcategory-item ${
                                                    selectedSubCategory?.id === sub.id ? "active" : ""
                                                }`}
                                                onClick={(e) => {
                                                    e.stopPropagation();
                                                    handleSubCategoryClick(sub);
                                                }}
                                            >
                                                {sub.name}
                                            </li>
                                        ))}
                                    </ul>
                                )}
                            </li>
                        ))
                    ) : (
                        <li>Ничего не найдено</li>
                    )}
                </ul>
            </div>
            <div className="right-panel">
                {selectedSubCategory ? (
                    <>
                        <h3>
                            {selectedCategory?.article} - {selectedSubCategory.name}
                        </h3>
                        <div>{selectedSubCategory.content}</div>
                    </>
                ) : (
                    <p>Выберите категорию и подкатегорию</p>
                )}
            </div>
        </div>
    );
};

export default Services;